const distanciaInputInicial=document.getElementById("distancia-diaria");const distanciaValorInicial=document.getElementById("valor-distancia");const díasInputInicial=document.getElementById("días-semana");const díasValorInicial=document.getElementById("valor-días");const updateRangeValueInicial=(input,valor)=>{if(input&&valor){input.addEventListener("input",()=>{valor.textContent=input.value})}};updateRangeValueInicial(distanciaInputInicial,distanciaValorInicial);updateRangeValueInicial(díasInputInicial,díasValorInicial);document.addEventListener("DOMContentLoaded",()=>{const calculatorLeft=document.querySelector(".calculator-left");const calculatorRight=document.querySelector(".calculator-right");const initialCalculatorLeftHTML=calculatorLeft.innerHTML;const navButtonsInitial=document.querySelectorAll(".nav-button");const sectionsInitial=document.querySelectorAll(".calculator-form");const attachNavButtonListeners=()=>{const navButtons=document.querySelectorAll(".nav-button");const sections=document.querySelectorAll(".calculator-form");navButtons.forEach((button)=>{button.addEventListener("click",()=>{navButtons.forEach((btn)=>btn.classList.remove("active"));button.classList.add("active");sections.forEach((section)=>(section.style.display="none"));const sectionId=button.getAttribute("data-section");const targetSection=document.getElementById(sectionId);if(targetSection){targetSection.style.display="block"}else{console.error(`No se encontró la sección con el ID: ${sectionId}`)}})})};attachNavButtonListeners();const sectionCompletion={transporte:!1,hogar:!1,"estilo-vida":!1,};const checkSectionCompletion=(sectionId)=>{const section=document.getElementById(sectionId);if(section){const ranges=section.querySelectorAll('input[type="range"]');return Array.from(ranges).every((range)=>range.dataset.changed==="true")}
return!1};const isFormComplete=()=>{return Object.values(sectionCompletion).every((completed)=>completed)};const toggleCalculateButton=()=>{const calculateButton=calculatorLeft.querySelector(".calculate-button");if(calculateButton){calculateButton.disabled=!isFormComplete();calculateButton.style.opacity=isFormComplete()?"1":"0.8"}};const updateRangeValue=(range)=>{const span=range.nextElementSibling;if(span){span.textContent=range.value+(range.id.includes("porcentaje")?"%":"")}};const handleInputChange=(event)=>{const range=event.target;range.dataset.changed="true";const sectionId=range.closest(".calculator-form").id;sectionCompletion[sectionId]=checkSectionCompletion(sectionId);updateRangeValue(range);toggleCalculateButton()};const attachRangeListeners=()=>{calculatorLeft.querySelectorAll("input[type='range']").forEach((input)=>{input.dataset.changed="false";input.removeEventListener("input",handleInputChange);input.addEventListener("input",handleInputChange)})};const resetFormState=()=>{Object.keys(sectionCompletion).forEach((key)=>{sectionCompletion[key]=!1});calculatorLeft.querySelectorAll('input[type="range"]').forEach((range)=>{range.dataset.changed="false";range.value=range.min;updateRangeValue(range)});toggleCalculateButton()};attachRangeListeners();toggleCalculateButton();calculatorLeft.addEventListener("click",(event)=>{if(event.target.classList.contains("recalculate-button")){const firstSectionId=navButtonsInitial[0]?.getAttribute("data-section");sectionsInitial.forEach((section)=>(section.style.display="none"));if(firstSectionId){const firstSection=document.getElementById(firstSectionId);if(firstSection){firstSection.style.display="block"}else{console.error(`No se encontró la sección inicial con el ID: ${firstSectionId}`)}}
navButtonsInitial.forEach((btn)=>btn.classList.remove("active"));if(navButtonsInitial.length>0){navButtonsInitial[0].classList.add("active")}
calculatorLeft.innerHTML=initialCalculatorLeftHTML;attachNavButtonListeners();attachRangeListeners();resetFormState();if(calculatorRight){const tituloRecomendaciones=calculatorRight.querySelector("h3");const listaRecomendaciones=calculatorRight.querySelector(".advice-list");const nivelImpactoSpan=calculatorRight.querySelector("#nivel-impacto");if(tituloRecomendaciones)
tituloRecomendaciones.textContent="Tu Huella de Carbono";if(listaRecomendaciones)
listaRecomendaciones.innerHTML=`<li>Esperando tu cálculo...</li><li>Esperando tu cálculo...</li><li>Esperando tu cálculo...</li><li>Esperando tu cálculo...</li><li>Esperando tu cálculo...</li><li>Esperando tu cálculo...</li>`;if(nivelImpactoSpan)nivelImpactoSpan.textContent="..."}}else if(event.target.classList.contains("calculate-button")){const results=calculateCarbonFootprint();showResults(results);resetFormState();attachRangeListeners()}});const calculateButton=document.querySelector(".calculate-button");const calculateCarbonFootprint=()=>{const tipoVehículo=document.getElementById("tipo-vehículo").value;const distanciaDiaria=parseFloat(document.getElementById("distancia-diaria").value);const díasSemana=parseFloat(document.getElementById("días-semana").value);let transporteCO2=0;switch(tipoVehículo){case "Automóvil (Gasolina/Diesel)":transporteCO2=distanciaDiaria*díasSemana*0.21;break;case "Automóvil Híbrido":transporteCO2=distanciaDiaria*díasSemana*0.12;break;case "Automóvil Eléctrico":transporteCO2=distanciaDiaria*díasSemana*0.05;break;case "Motocicleta":transporteCO2=distanciaDiaria*díasSemana*0.1;break;case "Transporte Público":transporteCO2=distanciaDiaria*díasSemana*0.05;break;case "Bicicleta/A pie":transporteCO2=0;break}
const electricidad=parseFloat(document.getElementById("consumo-electricidad").value);const gas=parseFloat(document.getElementById("consumo-gas").value);const energíaRenovable=parseFloat(document.getElementById("energía-renovable").value);const hogarCO2=electricidad*0.5+gas*2.1-(energíaRenovable/100)*(electricidad*0.5);const carne=parseFloat(document.getElementById("consumo-carne").value);const alimentosLocales=parseFloat(document.getElementById("alimentos-locales").value);const reciclaje=parseFloat(document.getElementById("reciclaje").value);const estiloVidaCO2=(carne*0.03+(100-alimentosLocales)*0.02)*(1-reciclaje/100);const totalCO2=transporteCO2+hogarCO2+estiloVidaCO2;return{totalCO2:totalCO2.toFixed(2),transporteCO2:transporteCO2.toFixed(2),hogarCO2:hogarCO2.toFixed(2),estiloVidaCO2:estiloVidaCO2.toFixed(2),}};const showResults=(results)=>{const mediaNacional=1000;const porcentajeComparación=((results.totalCO2/mediaNacional)*100).toFixed(2);let nivelHuella="";let recomendacionesListaHTML="";if(porcentajeComparación<50){nivelHuella="Bajo";recomendacionesListaHTML=`
    <li>Considera mantener tus hábitos de transporte sostenibles, como caminar o usar bicicleta, para seguir reduciendo emisiones.</li>
    <li>Sigue optimizando el consumo de energía en tu hogar, utilizando electrodomésticos eficientes y apagando luces innecesarias.</li>
    <li>Mantén una dieta equilibrada con alimentos locales y orgánicos, lo que también apoya a los productores locales.</li>
    <li>Continúa con tus prácticas de reciclaje y reducción de residuos, separando correctamente los materiales reciclables.</li>
    <li>Explora opciones para reutilizar objetos en lugar de desecharlos, como ropa o muebles.</li>
    <li>Participa en actividades comunitarias relacionadas con la sostenibilidad, como limpiezas de parques o campañas de reforestación.</li>
   `}else if(porcentajeComparación>=50&&porcentajeComparación<=100){nivelHuella="Medio";recomendacionesListaHTML=`
    <li>Evalúa opciones para reducir tus viajes en coche o considera alternativas como el transporte público o el uso compartido de vehículos.</li>
    <li>Busca formas de mejorar la eficiencia energética de tu hogar, como instalar paneles solares o mejorar el aislamiento térmico.</li>
    <li>Intenta reducir el consumo de carne y aumentar los productos locales y de temporada en tu dieta diaria.</li>
    <li>Revisa tus hábitos de consumo y busca reducir residuos comprando productos con menos empaques.</li>
    <li>Considera cambiar a bombillas LED y electrodomésticos de bajo consumo para reducir el uso de electricidad.</li>
    <li>Infórmate sobre programas de reciclaje en tu comunidad y participa activamente en ellos.</li>
   `}else{nivelHuella="Alto";recomendacionesListaHTML=`
    <li>Analiza tus patrones de transporte y busca alternativas más ecológicas, como vehículos eléctricos o transporte público.</li>
    <li>Realiza mejoras significativas en la eficiencia energética de tu hogar, como cambiar ventanas por modelos más eficientes.</li>
    <li>Reduce considerablemente tu consumo de carne y prioriza dietas basadas en plantas, lo que también beneficia tu salud.</li>
    <li>Adopta prácticas de consumo más conscientes y reduce drásticamente los residuos, evitando productos desechables.</li>
    <li>Considera participar en programas de compensación de carbono para mitigar tus emisiones.</li>
    <li>Educa a tu familia y amigos sobre la importancia de reducir la huella de carbono y cómo pueden contribuir.</li>
   `}
const nivelImpactoSpanLeft=calculatorLeft.querySelector(".results-container p:nth-child(4) strong");if(nivelImpactoSpanLeft){nivelImpactoSpanLeft.textContent=nivelHuella}else{calculatorLeft.innerHTML=`
    <div class="results-container">
     <h3>Calcula tu Huella de Carbono</h3>
     <p>Basado en tus respuestas, hemos calculado tu impacto ambiental mensual</p>
     <p><strong>${results.totalCO2} kg CO₂e/mes</strong></p>
     <p>Impacto: ${nivelHuella}</p>
     <div class="results-details">
      <p>Transporte: <span>${results.transporteCO2} kg CO₂e/mes</span></p>
      <div class="progress-bar">
       <div class="progress" style="width: ${
         (results.transporteCO2 / mediaNacional) * 100
       }%;"></div>
      </div>
      <p>Hogar: <span>${results.hogarCO2} kg CO₂e/mes</span></p>
      <div class="progress-bar">
       <div class="progress" style="width: ${
         (results.hogarCO2 / mediaNacional) * 100
       }%;"></div>
      </div>
      <p>Estilo Vida: <span>${results.estiloVidaCO2} kg CO₂e/mes</span></p>
      <div class="progress-bar">
       <div class="progress" style="width: ${
         (results.estiloVidaCO2 / mediaNacional) * 100
       }%;"></div>
      </div>
     </div>
     <p class="results-msg">
      Comparación: Tu huella es aproximadamente el ${porcentajeComparación}% de la media nacional.
     </p>
     <button type="button" class="recalculate-button">Volver a Calcular</button>
    </div>
   `}
if(calculatorRight){const listaRecomendacionesElement=calculatorRight.querySelector(".advice-list");const nivelImpactoSpanRight=calculatorRight.querySelector("#nivel-impacto");const tituloRecomendaciones=calculatorRight.querySelector("h3");if(tituloRecomendaciones)
tituloRecomendaciones.textContent="Tu Huella de Carbono";if(listaRecomendacionesElement)
listaRecomendacionesElement.innerHTML=recomendacionesListaHTML;if(nivelImpactoSpanRight)
nivelImpactoSpanRight.textContent=nivelHuella}}})